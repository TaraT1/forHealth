<%- include('../partials/header.ejs') %>
<section class="container">
  <div class="row mt-5">
    <div class="col-6">
      <h2>Form to Create a Health Profile</h2>
        
        <label for="name" class="form-label">Name</label>
        <input type="text" class="form-control" id="name" name="name" value="<%= profile.name %>">
        
        <label for="birthDate" class="form-label">Enter your birthday</label>
          <input type="date" class="form-control" id="birthDate" name="birthDate" value="<%= profile.birthDate == null ? '' : profile.birthDate.toISOString().split('T')[0 %>">

        <label for="sex" class="genderAssignedAtBirth">What is your sex (gender assigned at birth)?</label>
            <select class="form-select" id="genderAssignedAtBirth">
              <option value="sex" selected>Please select:</option>
              <option value="female">female</option>
              <option value="male">male</option>
            </select>

        <label for="genderId" class="form-label">What is your gender identity?</label>
          <input type="text" class="form-control" id="genderId" name="genderId" value="<%= profile.genderId %>">
        
        <label for="geneticBackground" class="form-label">Genetic Background</label>
          <textarea class="form-control" id="geneticBackground" name="genenticBackground" value="<%= profile.geneticBackground %>"></textarea>
        
        <label for="eHealthRecords" class="form-label">eHealth Records</label>
          <textarea class="form-control" id="eHealthRecords" name="eHealthRecords" value="<%= profile.eHealthRecords %>"></textarea>
        
        <label for="journal" class="form-label">Journal</label>
          <textarea class="form-control" id="journal" name="journal" value="<%= profile.journal %>"></textarea>

        <label for="todo" class="form-label">To Do</label>
            <textarea class="form-control" id="todo" name="todo" value="<%= profile.todo %>"></textarea>
        
          <!-- <label for="imgUpload" class="form-label">Image</label>
          <input type="file" class="form-control" id="imageUpload" name="file">
          -->
        <div class="text-center">
          <button type="submit" class="btn btn-primary mt-3" value="Upload">Submit</button>
        </div>
      </form>
    </section>

        <section class="container mt-3">
          <div class="row">
            <div class="col">
              <h2>Health Profiles</h2>
                <% for( let i=0; i < profiles.length; i++) {%>
                  <div class="card">
                      <a href="/profiles/<%= profiles[i]._id%>">
                        <h5 class="card-title"><%= profiles[i].name%></h5>
                      </a>
                  </div>
                <% } %>
            </div>
          </div>
        </section>

      <h2>Table for Health Profile for <%= profile.name %> (profile.ejs) </h2>
      <table class="table">
        <thead></thead>
        <tbody>
          <tr>
            <td>Name</td>
            <td><%= profile.name %> </td>
          </tr>
          <tr>
            <td>Birthdate (yyyy-mm-dd)</td>
            <td><%= profile.birthDate.toISOString().split('T')[0] %></td>
          </tr>
          <tr>
            <td>Sex</td> 
            <td><%= profile.sex %> </td>
          </tr>
          <tr>
            <td>Gender Identity</td>
            <td><%= profile.genderId %></td>
          </tr>
          <tr>
            <td>Genetic Background</td>
            <td><%= profile.geneticBackground %></td>
          </tr>
          <tr>
            <td>eHealth Records</td>
            <td><%= profile.eHealthRecords %></td>
          </tr>
          <tr>
            <td>Journal</td>
            <td><%= profile.journal %></td>
          </tr>
          <tr>
            <td>To do</td>
            <td><%= profile.todo %></td>
          </tr>

        </tbody>
      </table>
      
      <div>
        <a href="/profiles/<%= profile._id %>">View</a>
        <a href="/profiles/<%= profile._id %>/edit">Edit</a>

        <form method="POST" action="/profiles/<%= profile._id %>?_method=DELETE">
          <button type="submit">Delete</button>  
        </form>
      </div>


    </section>

    <section class="container mt-3">
      <div class="row">
          <h2>Health Profiles</h2>
            <% for(let i=0; i < profiles.length; i++) {%>
              <div class="card">
                <a href="/profiles/<%= profiles[i]._id%>" class="card-link">
                    <h5 class="card-title"><%= profiles[i].name%></h5>
                  </a>
              </div>
            <% } %>
      </div>
    </section>


      </div>
    </div>   
  </div>   
</section>

<%- include('partials/footer') -%>